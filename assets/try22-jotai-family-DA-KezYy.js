import{__toESM as e,clsx_default as t,require_jsx_runtime as n,require_react as r}from"./index-CNRXf_Sd.js";import{_Symbol_default as i,_baseGetTag_default as a,_freeGlobal_default as o,_root_default as s}from"./isObject-9FbGQutX.js";import{isObjectLike_default as c}from"./toNumber-1deUtn-U.js";import{_isIndex_default as l,isArrayLike_default as u,isLength_default as d,range_default as f}from"./range-By_eK658.js";import{eq_default as p}from"./eq-CR-dtW8f.js";import{_ListCache_default as m,_MapCache_default as h,_Map_default as g,_SetCache_default as _,_Set_default as v,_baseUnary_default as y,_cacheHas_default as b,_getNative_default as x,_setToArray_default as ee,_toSource_default as S}from"./_setToArray-DKSkhZXP.js";import{DevTools as te,atom as C,useAtom as w,useSetAtom as ne}from"./index.esm-CakKdeoA.js";var re=Array.isArray,T=re,ie=x(s,`WeakMap`),E=ie,ae=Object.prototype;function oe(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||ae;return e===n}var se=oe;function ce(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var le=ce,ue=`[object Arguments]`;function de(e){return c(e)&&a(e)==ue}var fe=de,D=Object.prototype,pe=D.hasOwnProperty,me=D.propertyIsEnumerable,he=fe(function(){return arguments}())?fe:function(e){return c(e)&&pe.call(e,`callee`)&&!me.call(e,`callee`)},ge=he;function _e(){return!1}var ve=_e,ye=typeof exports==`object`&&exports&&!exports.nodeType&&exports,O=ye&&typeof module==`object`&&module&&!module.nodeType&&module,be=O&&O.exports===ye,k=be?s.Buffer:void 0,xe=k?k.isBuffer:void 0,Se=xe||ve,A=Se,Ce=`[object Arguments]`,we=`[object Array]`,Te=`[object Boolean]`,Ee=`[object Date]`,De=`[object Error]`,Oe=`[object Function]`,ke=`[object Map]`,Ae=`[object Number]`,je=`[object Object]`,Me=`[object RegExp]`,Ne=`[object Set]`,Pe=`[object String]`,Fe=`[object WeakMap]`,Ie=`[object ArrayBuffer]`,Le=`[object DataView]`,Re=`[object Float32Array]`,ze=`[object Float64Array]`,Be=`[object Int8Array]`,Ve=`[object Int16Array]`,He=`[object Int32Array]`,Ue=`[object Uint8Array]`,We=`[object Uint8ClampedArray]`,Ge=`[object Uint16Array]`,Ke=`[object Uint32Array]`,j={};j[Re]=j[ze]=j[Be]=j[Ve]=j[He]=j[Ue]=j[We]=j[Ge]=j[Ke]=!0,j[Ce]=j[we]=j[Ie]=j[Te]=j[Le]=j[Ee]=j[De]=j[Oe]=j[ke]=j[Ae]=j[je]=j[Me]=j[Ne]=j[Pe]=j[Fe]=!1;function qe(e){return c(e)&&d(e.length)&&!!j[a(e)]}var Je=qe,Ye=typeof exports==`object`&&exports&&!exports.nodeType&&exports,M=Ye&&typeof module==`object`&&module&&!module.nodeType&&module,Xe=M&&M.exports===Ye,N=Xe&&o.process,Ze=function(){try{var e=M&&M.require&&M.require(`util`).types;return e||N&&N.binding&&N.binding(`util`)}catch{}}(),Qe=Ze,$e=Qe&&Qe.isTypedArray,et=$e?y($e):Je,tt=et,nt=Object.prototype,rt=nt.hasOwnProperty;function it(e,t){var n=T(e),r=!n&&ge(e),i=!n&&!r&&A(e),a=!n&&!r&&!i&&tt(e),o=n||r||i||a,s=o?le(e.length,String):[],c=s.length;for(var u in e)(t||rt.call(e,u))&&!(o&&(u==`length`||i&&(u==`offset`||u==`parent`)||a&&(u==`buffer`||u==`byteLength`||u==`byteOffset`)||l(u,c)))&&s.push(u);return s}var at=it;function ot(e,t){return function(n){return e(t(n))}}var st=ot,ct=st(Object.keys,Object),lt=ct,ut=Object.prototype,dt=ut.hasOwnProperty;function ft(e){if(!se(e))return lt(e);var t=[];for(var n in Object(e))dt.call(e,n)&&n!=`constructor`&&t.push(n);return t}var pt=ft;function mt(e){return u(e)?at(e):pt(e)}var ht=mt;function gt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var _t=gt;function vt(){this.__data__=new m,this.size=0}var yt=vt;function bt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var xt=bt;function St(e){return this.__data__.get(e)}var Ct=St;function wt(e){return this.__data__.has(e)}var Tt=wt,Et=200;function Dt(e,t){var n=this.__data__;if(n instanceof m){var r=n.__data__;if(!g||r.length<Et-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new h(r)}return n.set(e,t),this.size=n.size,this}var Ot=Dt;function P(e){var t=this.__data__=new m(e);this.size=t.size}P.prototype.clear=yt,P.prototype.delete=xt,P.prototype.get=Ct,P.prototype.has=Tt,P.prototype.set=Ot;var F=P;function kt(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var At=kt;function jt(){return[]}var Mt=jt,Nt=Object.prototype,Pt=Nt.propertyIsEnumerable,Ft=Object.getOwnPropertySymbols,It=Ft?function(e){return e==null?[]:(e=Object(e),At(Ft(e),function(t){return Pt.call(e,t)}))}:Mt,Lt=It;function Rt(e,t,n){var r=t(e);return T(e)?r:_t(r,n(e))}var zt=Rt;function Bt(e){return zt(e,ht,Lt)}var Vt=Bt,Ht=x(s,`DataView`),I=Ht,Ut=x(s,`Promise`),L=Ut,R=`[object Map]`,Wt=`[object Object]`,z=`[object Promise]`,B=`[object Set]`,V=`[object WeakMap]`,H=`[object DataView]`,Gt=S(I),Kt=S(g),qt=S(L),Jt=S(v),Yt=S(E),U=a;(I&&U(new I(new ArrayBuffer(1)))!=H||g&&U(new g)!=R||L&&U(L.resolve())!=z||v&&U(new v)!=B||E&&U(new E)!=V)&&(U=function(e){var t=a(e),n=t==Wt?e.constructor:void 0,r=n?S(n):``;if(r)switch(r){case Gt:return H;case Kt:return R;case qt:return z;case Jt:return B;case Yt:return V}return t});var W=U,Xt=s.Uint8Array,G=Xt;function Zt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Qt=Zt,$t=1,en=2;function tn(e,t,n,r,i,a){var o=n&$t,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&en?new _:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!Qt(t,function(e,t){if(!b(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var K=tn;function nn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var rn=nn,an=1,on=2,sn=`[object Boolean]`,cn=`[object Date]`,ln=`[object Error]`,un=`[object Map]`,dn=`[object Number]`,fn=`[object RegExp]`,pn=`[object Set]`,mn=`[object String]`,hn=`[object Symbol]`,gn=`[object ArrayBuffer]`,_n=`[object DataView]`,vn=i?i.prototype:void 0,q=vn?vn.valueOf:void 0;function yn(e,t,n,r,i,a,o){switch(n){case _n:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gn:return!(e.byteLength!=t.byteLength||!a(new G(e),new G(t)));case sn:case cn:case dn:return p(+e,+t);case ln:return e.name==t.name&&e.message==t.message;case fn:case mn:return e==t+``;case un:var s=rn;case pn:var c=r&an;if(s||=ee,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=on,o.set(e,t);var u=K(s(e),s(t),r,i,a,o);return o.delete(e),u;case hn:if(q)return q.call(e)==q.call(t)}return!1}var bn=yn,xn=1,Sn=Object.prototype,Cn=Sn.hasOwnProperty;function wn(e,t,n,r,i,a){var o=n&xn,s=Vt(e),c=s.length,l=Vt(t),u=l.length;if(c!=u&&!o)return!1;for(var d=c;d--;){var f=s[d];if(!(o?f in t:Cn.call(t,f)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var h=!0;a.set(e,t),a.set(t,e);for(var g=o;++d<c;){f=s[d];var _=e[f],v=t[f];if(r)var y=o?r(v,_,f,t,e,a):r(_,v,f,e,t,a);if(!(y===void 0?_===v||i(_,v,n,r,a):y)){h=!1;break}g||=f==`constructor`}if(h&&!g){var b=e.constructor,x=t.constructor;b!=x&&`constructor`in e&&`constructor`in t&&!(typeof b==`function`&&b instanceof b&&typeof x==`function`&&x instanceof x)&&(h=!1)}return a.delete(e),a.delete(t),h}var Tn=wn,En=1,Dn=`[object Arguments]`,On=`[object Array]`,J=`[object Object]`,kn=Object.prototype,An=kn.hasOwnProperty;function jn(e,t,n,r,i,a){var o=T(e),s=T(t),c=o?On:W(e),l=s?On:W(t);c=c==Dn?J:c,l=l==Dn?J:l;var u=c==J,d=l==J,f=c==l;if(f&&A(e)){if(!A(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new F,o||tt(e)?K(e,t,n,r,i,a):bn(e,t,c,n,r,i,a);if(!(n&En)){var p=u&&An.call(e,`__wrapped__`),m=d&&An.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new F,i(h,g,n,r,a)}}return f?(a||=new F,Tn(e,t,n,r,i,a)):!1}var Mn=jn;function Nn(e,t,n,r,i){return e===t?!0:e==null||t==null||!c(e)&&!c(t)?e!==e&&t!==t:Mn(e,t,n,r,Nn,i)}var Pn=Nn;function Fn(e,t){return Pn(e,t)}var In=Fn;const Ln=Symbol(``);function Y(e,t){let n=null,r=new Map,i=new Set,a=i=>{let s;if(t===void 0)s=r.get(i);else for(let[e,n]of r)if(t(e,i)){s=n;break}if(s!==void 0)if(n?.(s[1],i))a.remove(i);else return s[0];let c=e(i);return r.set(i,[c,Date.now()]),o(`CREATE`,i,c),c},o=(e,t,n)=>{for(let r of i)r({type:e,param:t,atom:n})};return a.unstable_listen=e=>(i.add(e),()=>{i.delete(e)}),a.getParams=()=>r.keys(),a.remove=e=>{if(t===void 0){if(!r.has(e))return;let[t]=r.get(e);r.delete(e),o(`REMOVE`,e,t)}else for(let[n,[i]]of r)if(t(n,e)){r.delete(n),o(`REMOVE`,n,i);break}},a.setShouldRemove=e=>{if(n=e,n)for(let[e,[t,i]]of r)n(i,e)&&(r.delete(e),o(`REMOVE`,e,t))},a}const X=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),Rn=new WeakMap,zn=(e,t,n,r)=>{let i=X(()=>new WeakMap,Rn,t),a=X(()=>new WeakMap,i,n);return X(e,a,r)};function Bn(e,t,n=Object.is){return zn(()=>{let r=Symbol(),i=([e,i])=>{if(i===r)return t(e);let a=t(e,i);return n(i,a)?i:a},a=C(t=>{let n=t(a),r=t(e);return i([r,n])});return a.init=r,a},e,t,n)}const Vn=e=>typeof e?.then==`function`;function Hn(e=()=>{try{return window.localStorage}catch{return}},t){var n;let r,i,a={getItem:(n,a)=>{var o,s;let c=e=>{if(e||=``,r!==e){try{i=JSON.parse(e,t?.reviver)}catch{return a}r=e}return i},l=(s=(o=e())?.getItem(n))??null;return Vn(l)?l.then(c):c(l)},setItem:(n,r)=>{var i;return(i=e())?.setItem(n,JSON.stringify(r,t?.replacer))},removeItem:t=>{var n;return(n=e())?.removeItem(t)}},o=e=>(t,n,r)=>e(t,e=>{let t;try{t=JSON.parse(e||``)}catch{t=r}n(t)}),s;try{s=(n=e())?.subscribe}catch{}return!s&&typeof window<`u`&&typeof window.addEventListener==`function`&&window.Storage&&(s=(t,n)=>{if(!(e()instanceof window.Storage))return()=>{};let r=r=>{r.storageArea===e()&&r.key===t&&n(r.newValue)};return window.addEventListener(`storage`,r),()=>{window.removeEventListener(`storage`,r)}}),s&&(a.subscribe=o(s)),a}const Un=Hn();function Wn(e,t,n=Un,r){let i=r?.getOnInit,a=C(i?n.getItem(e,t):t);a.onMount=r=>{r(n.getItem(e,t));let i;return n.subscribe&&(i=n.subscribe(e,r,t)),i};let o=C(e=>e(a),(r,i,o)=>{let s=typeof o==`function`?o(r(a)):o;return s===Ln?(i(a,t),n.removeItem(e)):Vn(s)?s.then(t=>(i(a,t),n.setItem(e,t))):(i(a,s),n.setItem(e,s))});return o}var Gn=e(r()),Z=e(n());const Q=C(13),Kn=Y(e=>Wn(e+`aaa`,e.toString().padStart(2,`0`)+`aaa`),In),qn=Y(e=>C(t=>t(Q)===e,(t,n)=>{n(Q,e)})),$=C(!0),Jn=C(e=>typeof e($)),Yn=C(e=>({status:typeof e($)})),Xn=Bn($,e=>({status:typeof e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Zn=C(e=>{console.time(`loooong operation`);for(let e=0;e<1e9;e++){let e=111**23}return console.timeEnd(`loooong operation`),`oh yeah!`});function Qn(){console.log(``),console.log(`render: TestJotaiControl`);let[e,n]=w($);return(0,Z.jsx)(`div`,{className:t(`select-none`,`hover:bg-white/10 active:bg-white/5`),onClick:()=>{n(e=>!e)},children:e?`true`:`false`})}function $n(){console.log(`render: TestJotaiPrimitive`);let[e,n]=w(Jn);return(0,Z.jsx)(`div`,{className:t(),children:e})}function er(){console.log(`render: TestJotaiObject`);let[e,n]=w(Yn);return(0,Z.jsx)(`div`,{className:t(),children:e.status.toString()})}function tr(){console.log(`render: TestJotaiSelect`);let[e,n]=w(Xn);return(0,Z.jsx)(`div`,{className:t(),onClick:()=>{},children:JSON.stringify(e)})}function nr(){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Qn,{}),(0,Z.jsx)($n,{}),(0,Z.jsx)(er,{}),(0,Z.jsx)(tr,{})]})}function rr(){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(nr,{}),(0,Z.jsx)(`div`,{className:t(`select-none font-mono font-bold `),children:f(300).map(e=>(0,Z.jsx)(ir,{id:e},e))}),(0,Z.jsx)(te,{})]})}function ir({id:e}){console.log(`------render------`);let[n,r]=(0,Gn.useState)(0),[i,a]=w(Kn(e)),o=ne(Q),[s,c]=w(qn(e));return(0,Gn.useEffect)(()=>{console.log(`setText changed`)},[a]),(0,Z.jsx)(`div`,{className:t(`hover:bg-white/10 active:bg-white/5`,s&&`text-green-500`),onPointerDown:e=>{e.buttons===1?a(e=>e+`!`):e.buttons===2&&a(e=>e.replace(/!$/,``)),c()},onContextMenu:e=>{e.preventDefault()},onPointerEnter:e=>{e.buttons===1?a(e=>e+`!`):e.buttons===2&&a(e=>e.replace(/!$/,``)),e.buttons>=1&&c()},children:i})}export{rr as default};