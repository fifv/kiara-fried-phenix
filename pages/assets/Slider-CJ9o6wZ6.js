import{__toESM as e,clsx_default as t,require_jsx_runtime as n,require_react as r}from"./index-BfF3hZ2k.js";import{toNumber_default as i}from"./toNumber-1deUtn-U.js";function a(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}var o=a;function s(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=i(n),n=n===n?n:0),t!==void 0&&(t=i(t),t=t===t?t:0),o(i(e),t,n)}var c=s,l=e(r(),1),u={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=l.createContext&&l.createContext(u),f=[`attr`,`size`,`title`];function p(e,t){if(e==null)return{};var n=m(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function m(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?g(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return t=y(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=b(e,`string`);return typeof t==`symbol`?t:t+``}function b(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function x(e){return e&&e.map((e,t)=>l.createElement(e.tag,_({key:t},e.attr),x(e.child)))}function S(e){return t=>l.createElement(C,h({attr:_({},e.attr)},t),x(e.child))}function C(e){var t=t=>{var{attr:n,size:r,title:i}=e,a=p(e,f),o=r||t.size||`1em`,s;return t.className&&(s=t.className),e.className&&(s=(s?s+` `:``)+e.className),l.createElement(`svg`,h({stroke:`currentColor`,fill:`currentColor`,strokeWidth:`0`},t.attr,n,a,{className:s,style:_(_({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:`http://www.w3.org/2000/svg`}),i&&l.createElement(`title`,null,i),e.children)};return d===void 0?t(u):l.createElement(d.Consumer,null,e=>t(e))}function w(e){return S({tag:`svg`,attr:{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`},child:[{tag:`polyline`,attr:{points:`11 17 6 12 11 7`},child:[]},{tag:`polyline`,attr:{points:`18 17 13 12 18 7`},child:[]}]})(e)}function T(e){return S({tag:`svg`,attr:{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`},child:[{tag:`polyline`,attr:{points:`13 17 18 12 13 7`},child:[]},{tag:`polyline`,attr:{points:`6 17 11 12 6 7`},child:[]}]})(e)}var E=e(n());const D={leftDouble:(0,E.jsx)(w,{}),rightDouble:(0,E.jsx)(T,{})};function O(e){let n=e?.getIndicatorContent,[r,i]=(0,l.useState)(0),[a,o]=(0,l.useState)(!1),s=(0,l.useRef)(void 0),c=(0,l.useRef)(!1),u=(0,l.useCallback)(function(e,t){t==null?t=c.current:c.current=t,(e!==0||t)&&(o(!0),i(a?t=>t+e:e)),clearTimeout(s.current),t||(s.current=setTimeout(function(){o(!1)},500))},[a]),d=(0,l.useCallback)(function(){c.current=!1,clearTimeout(s.current),s.current=setTimeout(function(){o(!1)},500)},[]),f=(0,E.jsx)(`div`,{className:t(`DeltaIndicator`,`fixed top-1/2 -translate-y-1/2 -translate-x-1/2 px-3 py-1`,`bg-slate-600/40 text-white/60  rounded  pointer-events-none`,``,a?`opacity-1 #transition-[left]`:`opacity-0 transition-opacity `,r<0&&`left-1/3 `||r>0&&`left-2/3 `||`left-1/2 `),children:n?.(r)??(0,E.jsxs)(`div`,{className:`flex items-center justify-center gap-1`,children:[r<0&&D.leftDouble,r.toFixed(3),r>0&&D.rightDouble]})});return{DeltaIndicator:f,showDeltaIndicator:u,cancelPersistDeltaIndicator:d}}function k({isForceShow:e,value:n,getIndicatorContent:r}){let[i,a]=(0,l.useState)(0),[o,s]=(0,l.useState)(!1),c=o||e,u=(0,l.useRef)(void 0),d=(0,l.useRef)(n);function f(e){s(!0),a(c?t=>t+e:e),clearTimeout(u.current),u.current=setTimeout(function(){s(!1)},500)}return(0,l.useEffect)(()=>{e||(clearTimeout(u.current),u.current=setTimeout(function(){s(!1)},500))},[e]),(0,l.useEffect)(()=>{d.current=n}),(0,E.jsx)(`div`,{className:t(`DeltaIndicator`,`fixed top-1/2 -translate-y-1/2 -translate-x-1/2 px-3 py-1`,`bg-slate-600/40 text-white/60  rounded  pointer-events-none`,``,c?`opacity-1 #transition-[left]`:`opacity-0 transition-opacity `,i<0&&`left-1/3 `||i>0&&`left-2/3 `||`left-1/2 `),children:r?.(n,i)??(0,E.jsxs)(`div`,{className:`flex items-center justify-center gap-1`,children:[i<0&&D.leftDouble,i.toFixed(3),i>0&&D.rightDouble]})})}function A({isShowSlider:e=!0,isVertical:n,className:r,value:i,children:a,isShowDebugInfo:o,isDisableMouse:s=!1,isDisableSlide:u=!1,isLockAxis:d=!1,bufferedPercentRanges:f,hoverIndicatorPosition:p,isEnableHoverIndicator:m=!1,onValueChange:h,getHoverIndicatorContent:g,onWheel:_,onPointerDown:v,onPointerUp:y}){i=c(i,0,1);let b=(0,l.useRef)(null),x=(0,l.useRef)(null),S=(0,l.useRef)(null),C=(0,l.useRef)(null),w=(0,l.useRef)(null),T=(0,l.useRef)(null),D=(0,l.useRef)(!0),O=(0,l.useRef)(!0),[k,A]=(0,l.useState)(i),[j,N]=(0,l.useState)(!1),[P,F]=(0,l.useState)(!1),I=0;function L(e,t){h?.(e,P,t)}function R(e){let t=e.currentTarget.getBoundingClientRect();if(e.pointerType===`mouse`&&!s){e.stopPropagation(),e.buttons>1&&(e.currentTarget.releasePointerCapture(e.pointerId),F(!1),y?.());let r=c(n?1-(e.clientY-t.top)/t.height:(e.clientX-t.left)/t.width,0,1);switch(e.type){case`pointerdown`:e.buttons===1&&(F(!0),v?.(),e.currentTarget.setPointerCapture(e.pointerId),L(r,r-i),T.current=e);break;case`pointermove`:if(A(r),N(!0),e.buttons===1&&P&&T.current){let i=c(e.clientX,t.left,t.right)-c(T.current.clientX,t.left,t.right),a=c(e.clientY,t.top,t.bottom)-c(T.current.clientY,t.top,t.bottom);if(i!==0||a!==0){if(n){let e=-a/t.height;L(r,e)}else{let e=i/t.width;L(r,e)}T.current=e}}break;case`pointerup`:F(!1),y?.(),e.currentTarget.releasePointerCapture(e.pointerId);break;case`pointerleave`:N(!1);break}}else if(e.pointerType===`touch`&&!u)switch(e.type){case`pointerdown`:S.current===null&&(S.current=e.pointerId,w.current=e,O.current=!0,e.currentTarget.setPointerCapture(e.pointerId),F(!0),v?.());break;case`pointermove`:if(e.pointerId===S.current&&w.current){let r=e.clientX-w.current?.clientX,a=e.clientY-w.current?.clientY;if((r!==0||a!==0)&&(O.current&&(D.current=n?Math.abs(r)<Math.abs(a):Math.abs(r)>Math.abs(a),O.current=!1),!d||D.current))if(n){let e=c(i+-a/t.height,0,1);L(e,e-i)}else{let e=c(i+r/t.width,0,1);L(e,e-i)}w.current=e}break;case`pointercancel`:case`pointerleave`:case`pointerup`:e.pointerId===S.current&&(e.currentTarget.releasePointerCapture(e.pointerId),S.current=null,F(!1),y?.());break;default:break}}function z(e){if(x.current===null){let t=e.targetTouches.item(0);b.current=t,x.current=t.identifier,F(!0),v?.()}}function B(e){if(x.current!==null){let t=(()=>{for(let t=0;t<e.targetTouches.length;t++){let n=e.targetTouches.item(t);if(n.identifier===x.current)return n}})(),r=e.currentTarget.getBoundingClientRect();if(t&&b.current){let e=t.clientY-b.current.clientY,a=t.clientX-b.current.clientX;if(n){if(Math.abs(a)<Math.abs(e)){let t=c(i+-e/r.height*1,0,1);L(t,t-i)}}else if(Math.abs(a)>Math.abs(e)){let e=c(i+a/r.width*1,0,1);L(e,e-i)}b.current=t}}}function V(e){let t=!0;for(let n=0;n<e.targetTouches.length;n++){let r=e.targetTouches.item(n);r.identifier===x.current&&(t=!1)}t&&(x.current=null,F(!1),y?.())}(0,l.useEffect)(()=>{let e=C.current;function t(e){e.preventDefault(),e.stopPropagation(),_?.(e)}return _&&e?.addEventListener(`wheel`,t),()=>{_&&e?.removeEventListener(`wheel`,t)}},[_]);let H=0,U=(0,E.jsxs)(`div`,{className:t(`CurrentIndicator absolute `,` px-3 py-1 w-max h-max`,`bg-slate-600/40 text-white/60  rounded  pointer-events-none text-xs`,n?p===`bottom/right`?`right-0 translate-y-1/2 translate-x-full`:`left-0  -translate-y-1/2 -translate-x-full`:p===`bottom/right`?`bottom-0  translate-y-full -translate-x-1/2`:`top-0  -translate-y-full -translate-x-1/2`),style:n?{bottom:`${k*100}%`}:{left:`${k*100}%`},children:[(0,E.jsx)(`div`,{className:t(`indicatorArrow`,`absolute bg-transparent w-0 h-0  `,`border-t-[6px] border-b-[6px] border-l-[6px] border-r-[6px]`,n?p===`bottom/right`?`left-0 top-1/2 -translate-y-1/2 -translate-x-full border-r-slate-600/40 border-b-transparent border-l-transparent border-t-transparent`:`right-0 top-1/2 -translate-y-1/2 translate-x-full border-l-slate-600/40 border-b-transparent border-t-transparent border-r-transparent`:p===`bottom/right`?`top-0 left-1/2 -translate-x-1/2 -translate-y-full   border-b-slate-600/40 border-t-transparent border-l-transparent border-r-transparent`:`bottom-0 left-1/2 -translate-x-1/2 translate-y-full border-t-slate-600/40 border-b-transparent border-l-transparent border-r-transparent`)}),g?.(k)??k.toFixed(3)]});return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(`div`,{ref:C,className:t(`Slider bor!der border-blue-600  touch-none select-none grid items-center justify-items-center group `,e&&`cursor-pointer`,{isAbleTouch:``},r),onContextMenu:e=>{e.preventDefault()},onPointerMove:R,onPointerDown:R,onPointerUp:R,onPointerLeave:R,onPointerCancel:R,children:[a,e&&(0,E.jsxs)(`div`,{className:t(`  relative bg-slate-100/10`,n?`h-full w-0.5`:`w-full h-0.5 `,n?`group-hover:w-2`:`group-hover:h-2`),style:{},children:[f?.map((e,r)=>(0,E.jsx)(`div`,{className:t(`bufferedBar absolute bg-slate-100/20 #bg-green-500`,n?`w-full h-full origin-bottom`:`w-full h-full origin-left`),style:{transform:`
                                        ${n?`scaleY`:`scaleX`}(${e.end-e.start}) 
                                        `,[n?`bottom`:`left`]:`${e.start*100}%`}},r)),(0,E.jsx)(`div`,{className:t(`mainBar absolute bg-yellow-300  `,n?`w-full bottom-0`:`h-full left-0`),style:{[n?`height`:`width`]:`${i*100}%`}}),(0,E.jsx)(`div`,{className:t(`shadowBar absolute  `,k>i?`bg-slate-100/30`:`bg-black/30`,!j&&`hidden`),style:n?{height:`100%`,width:`100%`,transformOrigin:`bottom`,transform:`scale(100%, ${(k-i)*100}%)`,bottom:`${i*100}%`,left:0}:{height:`100%`,width:`100%`,transformOrigin:`left`,transform:`scale(${(k-i)*100}%, 100%)`,left:`${i*100}%`,top:0}})]}),m&&j&&U]}),o&&(0,E.jsx)(M,{refActionArea:C})]})}function j(){let[e,n]=(0,l.useState)(.5),[r,i]=(0,l.useState)(.5),[a,o]=(0,l.useState)(!1),[s,u]=(0,l.useState)(0),{DeltaIndicator:d,showDeltaIndicator:f,cancelPersistDeltaIndicator:p}=O();return(0,l.useEffect)(()=>{function e(e){e.key===`ArrowLeft`?(n(e=>c(e-.1,0,1)),f(-.1)):e.key===`ArrowRight`&&(n(e=>c(e+.1,0,1)),f(.1))}return document.addEventListener(`keydown`,e),()=>{document.removeEventListener(`keydown`,e)}},[f]),(0,E.jsxs)(`div`,{className:`w-screen #h-[calc(100vh-70px)] border border-red-600`,children:[(0,E.jsx)(A,{className:`absolute h-20 w#-5/6 m-2 bottom-0 left-20 right-20`,isVertical:!1,value:e,isEnableHoverIndicator:!0,onPointerDown:()=>{},onPointerUp:()=>{p()},onValueChange:(t,r,i)=>{n(e=>e+i),f(i,!0),console.log(`[Slider: onValueChange]`,`value1:`,e,`newValue:`,t,`newValueDelta:`,i,`value1 + newValueDelta:`,e+i,t===e+i?``:`diff`,Math.abs(i)>1?`bigggggg`:``)},isShowDebugInfo:!0,bufferedPercentRanges:[{start:.5,end:.8},{start:.2,end:.3}]}),(0,E.jsx)(A,{className:`absolute h#-5/6 w-20 m-2 left-0 bottom-10 top-10`,isVertical:!0,value:r,isEnableHoverIndicator:!0,onValueChange:(e,t,n)=>{i(e),o(t),u(n),console.log(t,e,n)},isShowDebugInfo:!0,hoverIndicatorPosition:`bottom/right`,bufferedPercentRanges:[{start:.7,end:.8},{start:.2,end:.3}],onWheel:e=>{e.deltaY>0?(i(e=>c(e-.05,0,1)),f(-.05)):(i(e=>c(e+.05,0,1)),f(.05))}}),d,(0,E.jsx)(`button`,{className:t(`ml-32`),onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},children:`Toggle Fullscreen`})]})}function M({refActionArea:e}){let[t,n]=(0,l.useState)(null),[r,i]=(0,l.useState)(null),[a,o]=(0,l.useState)(null),[s,c]=(0,l.useState)(``);(0,l.useEffect)(()=>{function t(e){o(e),console.log()}function r(e){n(t=>e.targetTouches.item(0)??t);let t=[];for(let n=0;n<e.targetTouches.length;n++){let r=e.targetTouches.item(n);r&&t.push(r)}i(t),c(e.type)}let a=e.current;return a?.addEventListener(`pointerdown`,t),a?.addEventListener(`pointermove`,t),a?.addEventListener(`pointerup`,t),a?.addEventListener(`pointerleave`,t),a?.addEventListener(`pointerenter`,t),a?.addEventListener(`touchstart`,r),a?.addEventListener(`touchmove`,r),a?.addEventListener(`touchend`,r),()=>{a?.removeEventListener(`pointerdown`,t),a?.removeEventListener(`pointermove`,t),a?.removeEventListener(`pointerup`,t),a?.removeEventListener(`pointerleave`,t),a?.removeEventListener(`pointerenter`,t),a?.removeEventListener(`touchstart`,r),a?.removeEventListener(`touchmove`,r),a?.removeEventListener(`touchend`,r)}},[e]);let u=(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(`div`,{className:`#sm:grid grid grid-cols-2 text-xs sm:text-sm font-mono mb-12 border border-blue-300/30`,children:[(0,E.jsxs)(`div`,{children:[(0,E.jsx)(`div`,{className:`text-purple-400 font-bold`,children:` --Pointer-- `}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`type:`,` `]}),` 			`,(0,E.jsx)(N,{string:a?.type})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`pointerType:`,` `]}),` 	`,(0,E.jsx)(N,{string:a?.pointerType})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`pointerId:`,` `]}),` 	`,(0,E.jsx)(N,{string:a?.pointerId})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`screenX:`,` `]}),` 		`,(0,E.jsx)(N,{string:a?.screenX.toFixed(2)}),`	`]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`screenY:`,` `]}),` 		`,(0,E.jsx)(N,{string:a?.screenY.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`clientX:`,` `]}),` 		`,(0,E.jsx)(N,{string:a?.clientX.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`clientY:`,` `]}),` 		`,(0,E.jsx)(N,{string:a?.clientY.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`movementX:`,` `]}),` 	`,(0,E.jsx)(N,{string:a?.movementX.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`movementY:`,` `]}),` 	`,(0,E.jsx)(N,{string:a?.movementY.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`buttons:`,` `]}),` 		`,(0,E.jsx)(N,{string:a?.buttons})]})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsx)(`div`,{className:`text-purple-400 font-bold`,children:` --Touch-- `}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`type:`,` `]}),` 			`,(0,E.jsx)(N,{string:s})]}),r?.map(e=>(0,E.jsxs)(l.Fragment,{children:[(0,E.jsxs)(`div`,{className:`text-red-400`,children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`identifier:`,` `]}),` 	`,(0,E.jsx)(N,{string:e?.identifier})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`clientX:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.clientX.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`clientY:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.clientY.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`pageX:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.pageX.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`pageY:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.pageY.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`screenX:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.screenX.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`screenY:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.screenY.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`radiusX:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.radiusX.toFixed(2)})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`inline-block w-28`,children:[`radiusY:`,` `]}),` 		`,(0,E.jsx)(N,{string:e?.radiusY.toFixed(2)})]})]},e.identifier))]})]})});return u}function N({string:e}){return typeof e==`number`&&(e=e.toString()),e?.split(``).map((e,t)=>(0,E.jsx)(P,{char:e},e+t))}function P({char:e}){let t=(0,l.useRef)(``),n=(0,l.useRef)(void 0),r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{e!==t.current&&(n.current?(n.current?.cancel(),n.current?.play()):n.current=r.current?.animate([{backgroundColor:`DarkGoldenRod`},{backgroundColor:`transparent`}],{fill:`both`,duration:300})),t.current=e},[e]),(0,E.jsx)(`span`,{ref:r,children:e})}export{k as DeltaIndicator,A as Slider,j as Test,O as useDeltaIndicator};