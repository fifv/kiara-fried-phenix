import{__toESM as e,clsx_default as t,require_jsx_runtime as n,useLocalStorage as r}from"./index-CNRXf_Sd.js";import{QueryClient as i,QueryClientProvider as a,useQuery as o}from"./useQuery-BNiMgIvZ.js";var s=function(){return null},c=e(n());const l=new i;function u(){let[e,n]=r(`qbit-batch-mv/changes`,[]),{isFetching:i,error:a,data:s=[]}=o({queryKey:[`torrents`],queryFn:async()=>{let e=await(await fetch(`https://fifv.fun:55000/qbittorrent/api/v2/sync/maindata`,{method:`GET`})).json(),t=Object.values(e.torrents).filter((e,t)=>e.save_path.startsWith(`/media/BitTorrentDownload`)&&!e.name.match(/(\d巻)|(月号)|(画集)|(全巻)/));return t.forEach((e,t)=>{}),t}});return(0,c.jsxs)(`div`,{className:`font-mono text-sm`,children:[i&&(0,c.jsx)(`div`,{className:`fixed top-0 left-0 h-5 w-5 m-2`,children:(0,c.jsxs)(`svg`,{className:`animate-spin   text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,c.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),(0,c.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]})}),s.map((r,i)=>{let a=e.find(e=>e.hashes===r.infohash_v1)?.location,o=!!a;return(0,c.jsxs)(`div`,{className:`flex items-center gap-2 m-2 w-1/2`,id:r.infohash_v1,children:[(0,c.jsx)(`div`,{children:`-${(i+1).toString().padStart(3,`0`)}-`}),(0,c.jsxs)(`div`,{className:`flex flex-col w-full`,children:[(0,c.jsx)(`div`,{className:`font-bold text-green-300`,children:r.name}),(0,c.jsxs)(`div`,{className:`flex gap-2 items-center`,children:[(0,c.jsx)(`div`,{className:t(o&&`line-through text-red-400`,`text-xs `,!o&&`text-white/60`),children:r.save_path}),(0,c.jsx)(`div`,{className:t(`text-white/20`),children:`>`}),(0,c.jsx)(`input`,{className:t(`p-1 rounded border border-slate-200/20 bg-transparent w-1/2`,o&&`text-green-500`),spellCheck:!1,value:a??r.save_path,onChange:t=>{let i=e.findIndex(e=>e.hashes===r.infohash_v1);if(t.currentTarget.value===r.save_path)i!==-1&&(e.splice(i),n(e));else{let a={hashes:r.infohash_v1,name:r.name,location:t.currentTarget.value};i===-1?n([...e,a]):(e[i]=a,n(e))}}}),(0,c.jsx)(`button`,{className:`m-0 px-2 py-1`,onClick:()=>{let t=e.findIndex(e=>e.hashes===r.infohash_v1),i={hashes:r.infohash_v1,name:r.name,location:`/media/fuserdata/Anime/`};t===-1?n([...e,i]):(e[t]=i,n(e))},children:`1`})]})]})]},r.infohash_v1)}),(0,c.jsx)(`div`,{className:t(`bg-slate-600 fixed right-8 top-0 rounded m-2 max-w-[40%]`),children:e.map((t,r)=>(0,c.jsxs)(`div`,{className:`relative p-2`,onClick:()=>{document.getElementById(t.hashes)?.scrollIntoView({block:`center`}),document.getElementById(t.hashes)?.animate([{outline:`solid red 4px`,borderRadius:`4px`},{outline:`solid transparent 4px`}],{duration:1500,fill:`none`})},children:[(0,c.jsx)(`div`,{children:t.hashes}),(0,c.jsx)(`div`,{children:t.name}),(0,c.jsx)(`div`,{children:t.location}),(0,c.jsx)(`button`,{className:`absolute right-0 top-0`,onClick:()=>{e.splice(r,1),n(e)},children:`X`})]},t.hashes))})]})}function d(){return(0,c.jsxs)(a,{client:l,children:[(0,c.jsx)(u,{}),(0,c.jsx)(s,{initialIsOpen:!1})]})}export{d as default};