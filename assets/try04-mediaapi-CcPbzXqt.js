import{__commonJSMin as e,__toESM as t,require_jsx_runtime as n,require_react as r}from"./index-CNRXf_Sd.js";import{source_default as i}from"./source-P3id8qau.js";var a=e((exports,t)=>{(function(e,n){"use strict";typeof define==`function`&&define.amd?define(n):typeof t==`object`&&t.exports?t.exports=n():e.log=n()})(void 0,function(){"use strict";var e=function(){},t=`undefined`,n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=[`trace`,`debug`,`info`,`warn`,`error`],i={},a=null;function o(e,t){var n=e[t];if(typeof n.bind==`function`)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(r){return r===`debug`&&(r=`log`),typeof console===t?!1:r===`trace`&&n?s:console[r]===void 0?console.log===void 0?e:o(console,`log`):o(console,r)}function l(){for(var n=this.getLevel(),i=0;i<r.length;i++){var a=r[i];this[a]=i<n?e:this.methodFactory(a,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return`No console available for logging`}function u(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function d(e,t,n){return c(e)||u.apply(this,arguments)}function f(e,n){var o=this,s,c,u,f=`loglevel`;typeof e==`string`?f+=`:`+e:typeof e==`symbol`&&(f=void 0);function p(e){var n=(r[e]||`silent`).toUpperCase();if(!(typeof window===t||!f)){try{window.localStorage[f]=n;return}catch{}try{window.document.cookie=encodeURIComponent(f)+`=`+n+`;`}catch{}}}function m(){var e;if(!(typeof window===t||!f)){try{e=window.localStorage[f]}catch{}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(f),i=n.indexOf(r+`=`);i!==-1&&(e=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch{}return o.levels[e]===void 0&&(e=void 0),e}}function h(){if(!(typeof window===t||!f)){try{window.localStorage.removeItem(f)}catch{}try{window.document.cookie=encodeURIComponent(f)+`=; expires=Thu, 01 Jan 1970 00:00:00 UTC`}catch{}}}function g(e){var t=e;if(typeof t==`string`&&o.levels[t.toUpperCase()]!==void 0&&(t=o.levels[t.toUpperCase()]),typeof t==`number`&&t>=0&&t<=o.levels.SILENT)return t;throw TypeError(`log.setLevel() called with invalid level: `+e)}o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=n||d,o.getLevel=function(){return u??c??s},o.setLevel=function(e,t){return u=g(e),t!==!1&&p(u),l.call(o)},o.setDefaultLevel=function(e){c=g(e),m()||o.setLevel(e,!1)},o.resetLevel=function(){u=null,h(),l.call(o)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)},o.rebuild=function(){if(a!==o&&(s=g(a.getLevel())),l.call(o),a===o)for(var e in i)i[e].rebuild()},s=g(a?a.getLevel():`WARN`);var _=m();_!=null&&(u=g(_)),l.call(o)}a=new f,a.getLogger=function(e){if(typeof e!=`symbol`&&typeof e!=`string`||e===``)throw TypeError(`You must supply a name when creating a logger.`);var t=i[e];return t||=i[e]=new f(e,a.methodFactory),t};var p=typeof window===t?void 0:window.log;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=p),a},a.getLoggers=function(){return i},a.default=a,a})}),o=e((exports,t)=>{t.exports=`hi`}),s=t(r()),c=t(a()),l=t(n());function u(){let[e,t]=(0,s.useState)(0),[n,r]=(0,s.useState)(``);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(`button`,{onClick:()=>{r(`https://fnothing.hopto.org:55000/api/file/Rushia%20Ch.%20%E6%BD%A4%E7%BE%BD%E3%82%8B%E3%81%97%E3%81%82/Membership%20Streams/[20210504]%20%E3%80%90%E6%AD%8C%E6%9E%A0_song%E3%80%91%E6%B7%B1%E5%A4%9C%E3%81%AE%E6%AD%8C%E6%9E%A0%E3%83%BB%E3%83%BB%E3%83%BB%EF%BC%81%EF%BC%81%EF%BC%81%E3%80%90%E6%BD%A4%E7%BE%BD%E3%82%8B%E3%81%97%E3%81%82_%E3%83%9B%E3%83%AD%E3%83%A9%E3%82%A4%E3%83%96%E3%80%91(01JtCTIdggo).mp4`)},children:`src: Rushia`}),(0,l.jsx)(`button`,{onClick:()=>{r(`https://fnothing.hopto.org:55000/api/file/%E8%8A%A6%E6%BE%A4%E3%82%B5%E3%82%AD/cover/[20201015]%E5%BF%83%E7%B5%B5%20(kokoroe)%20-%20%E3%83%AD%E3%83%BC%E3%83%89%E3%82%AA%E3%83%96%E3%83%A1%E3%82%B8%E3%83%A3%E3%83%BC%20_%20covered%20by%20%E8%8A%A6%E6%BE%A4%20%E3%82%B5%E3%82%AD-Nn-9VuX7JG0.webm`)},children:`src: Saki`}),(0,l.jsx)(f,{videoUrl:n,startTimeSeconds:n.includes(`Rushia`)?1e3:100,autoPlayIfUrlChange:!0})]})}function d(e,t){console.log(i.cyan(`****reportWatch****`,e,t))}function f({videoUrl:e,startTimeSeconds:t,autoPlayIfUrlChange:n}){console.log(i.magenta(`* render`));let[r,a]=(0,s.useState)(0),[o,u]=(0,s.useState)(0),[f,m]=(0,s.useState)(0),[h,g]=(0,s.useState)(!0),[_,v]=(0,s.useState)(!0),[y,b]=(0,s.useState)(.2),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{x.current&&(x.current.src=e,x.current.currentTime=t,n?x.current.play():x.current.pause())},[t,e]);let S=(0,s.experimental_useEffectEvent)(()=>{d(e,f)});(0,s.useEffect)(()=>{if(h){let e=setInterval(function(){S()},1e3);return()=>{clearInterval(e)}}},[h]),(0,s.useEffect)(()=>{S()},[e]),(0,s.useEffect)(()=>{let e=x.current;console.log(`effect video:`,e);function t(t){if(console.log(`*`,t.type),e){t.type===`durationchange`&&g(!e.paused);for(let e=0;e<100;e++);}}return e&&(e.addEventListener(`loadstart`,t),e.addEventListener(`durationchange`,t),e.addEventListener(`loadedmetadata`,t),e.addEventListener(`loadeddata`,t),e.addEventListener(`canplay`,t),e.addEventListener(`canplaythrough`,t),e.controls=!0,e.muted=!0,setTimeout(function(){},1e3)),()=>{e?.removeEventListener(`loadstart`,t),e?.removeEventListener(`durationchange`,t),e?.removeEventListener(`loadedmetadata`,t),e?.removeEventListener(`loadeddata`,t),e?.removeEventListener(`canplay`,t),e?.removeEventListener(`canplaythrough`,t)}},[]),(0,s.useEffect)(()=>{x.current&&(x.current.volume=y)},[y]),(0,s.useEffect)(()=>{x.current&&(x.current.muted=_)},[_]),(0,s.useEffect)(()=>(x.current&&(h?(console.log(`play`),x.current.play(),x.current.autoplay=!0):(console.log(`pause`),x.current.pause(),x.current.autoplay=!1)),()=>{}),[h]);function C(e){let t=x.current;t&&(t.src=`https://fnothing.hopto.org:55000/api/file/%E8%8A%A6%E6%BE%A4%E3%82%B5%E3%82%AD/cover/[20201015]%E5%BF%83%E7%B5%B5%20(kokoroe)%20-%20%E3%83%AD%E3%83%BC%E3%83%89%E3%82%AA%E3%83%96%E3%83%A1%E3%82%B8%E3%83%A3%E3%83%BC%20_%20covered%20by%20%E8%8A%A6%E6%BE%A4%20%E3%82%B5%E3%82%AD-Nn-9VuX7JG0.webm`,t.load(),t.currentTime=100,e??h?t.play():t.pause())}function w(e,t){let n=x.current;if(n){let r=(t??n.currentTime)+e;r>o&&(r=Math.floor(o)),c.default.log(`*_seekTo() offsetSeconds=`,e,`newPlayedSeconds=`,r),m(r),n.currentTime=r}}function T(e){v(t=>e??!t)}function E(e){g(t=>e??!t)}function D(e,t){t=(_?0:t??y)+e,t>1?t=1:t<0&&(t=0),c.default.log(`*_adjustVolumn`,t),localStorage.setItem(`volume`,t.toString()),localStorage.removeItem(`isMute`),b(t),v(!1)}return(0,l.jsxs)(`div`,{children:[(0,l.jsx)(`button`,{onClick:()=>{C()},children:`Load Video`}),(0,l.jsx)(`button`,{onClick:()=>{C(!0)},children:`Load Video & Play`}),(0,l.jsx)(`button`,{onClick:()=>{w(0,100)},children:`Seek To 100`}),(0,l.jsx)(`button`,{onClick:()=>{w(0,1e3)},children:`Seek To 1000`}),(0,l.jsx)(`button`,{onClick:()=>{E(),console.log(i.cyan(`Click`))},children:h?`Playing`:`Paused`}),(0,l.jsx)(`button`,{onClick:()=>{T(),console.log(i.cyan(`Click`))},children:_?`Muted`:`Sound`}),(0,l.jsx)(`div`,{className:`w-96 relative`,children:(0,l.jsx)(`video`,{className:`relative`,ref:x,width:`100%`,height:`100%`,onTimeUpdate:()=>{m(x.current.currentTime),console.log(`* onTimeUpdate:`,x.current.currentTime)},onPause:()=>{console.log(`* onPause`),g(!1)},onPlay:()=>{console.log(`* onPlay`),g(!0)},onEnded:()=>{},onVolumeChange:()=>{console.log(`* onVolumeChange`),b(x.current.volume),v(x.current.muted)},onDurationChange:()=>{u(x.current.duration)}})}),(0,l.jsx)(`input`,{type:`range`,className:`w-80`,value:f/o*100||0,onChange:e=>{w(0,parseFloat(e.currentTarget.value)/100*o)}}),(0,l.jsx)(`input`,{type:`range`,className:`w-80`,value:_?0:y*100,onChange:e=>{b(parseFloat(e.currentTarget.value)/100),v(!1)}}),(0,l.jsxs)(`div`,{children:[f,`/`,o]}),(0,l.jsx)(p,{})]})}var p=class extends s.Component{constructor(e){super(e),this.state={a:1}}render(){return(0,l.jsxs)(`div`,{children:[`a`,(0,l.jsx)(m,{})]})}};function m(){let[e,t]=(0,s.useState)(0);function n(e){asf,asdfasg,gasease,asff}return(0,l.jsxs)(`div`,{children:[`some2`,o()]})}export{f as Player,u as default};